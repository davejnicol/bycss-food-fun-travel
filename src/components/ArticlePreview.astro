---
import FormattedDate from "./FormattedDate.astro";
import Tag from "./Tag.astro";
import { createExcerpt } from "../utils/create-excerpt";
const { article, excerptLength = 0 } = Astro.props;
---

<article class="djne-flow">
	<div class="image-container">
		<img src={article.data.imageSrc} alt={article.data.imageAlt} />
		<Tag class="tag" tag={article.data.tags[0]} />
	</div>

	<div class="djne-flow">
		<p>
			<FormattedDate date={article.data.date} />
		</p>

		<h3 class="djne-fs-500 djne-fw-bold">{article.data.title}</h3>

		{excerptLength > 0 && <p>{createExcerpt(article.body, excerptLength)}</p>}

		<p>
			<a href={`/articles/${article.slug}`}>
				Read more <span class="djne-visually-hidden">about {article.data.title}</span>
			</a>
		</p>
	</div>
</article>

<style lang="scss">
	@use "../styles/abstracts" as *;

	article {
		--flow-spacer: #{$article-preview-spacing};
	}

	.image-container {
		position: relative;
	}

	.tag {
		position: absolute;
		bottom: $article-preview-tag-offset;
		left: $article-preview-tag-offset;
	}

	img {
		border-radius: 1rem;
		box-shadow: $article-preview-box-shadow;
		height: 100%;
		width: 100%;
		aspect-ratio: $article-preview-image-aspect-ratio;
		object-fit: cover;
	}
</style>
